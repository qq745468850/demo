import{P as V}from"./ProjectOnView-0054b5ca.js";import{Q as P}from"./QuestionView-d6215229.js";import{E as z}from"./examClient-2e75eb72.js";import{A as F}from"./accountClient-16268368.js";import{P as L}from"./publicClient-ee633572.js";import{ae as W,f as j,r as n,o as M,G as O,X as G,h as u,j as c,k as r,z as g,C as m,x as K,F as R,V as U,v as w,A as v,B as C,t as X}from"./plugin-vue_export-helper-3a3407bb.js";import{aD as I}from"./webClient-e9003e98.js";import"./enum-245cc125.js";import"./_commonjsHelpers-725317a4.js";import"./vue-router.esm-bundler-0ff22247.js";const Y={class:"pannel"},H={key:0,class:"top-banner"},J=["src"],Z={class:"content-con"},$={key:0,class:"question-con"},ee={class:"showError"},se={class:"btn-con"},te=j({__name:"wrongQuestions",setup(oe){let x=new L,E=new F,h=new z;const p=n(1),B=n(10),_=n(),a=n(!1),i=n(!1),d=n(!1),o=n([]),t=n({schoolId:"",kindId:"",zyId:"",kcId:"",questionType:"-1"});M(async()=>{await E.checkLogIn()&&x.getAdvItemByKey("WrongQuestions.TopBanner").then(e=>{_.value=e.data.boardUrlTbList[0].picture})});const y=()=>{i.value=!0,a.value=!1,o.value=[],h.qbsWrongQuestion(p.value,B.value,t.value.schoolId?t.value.schoolId:void 0,t.value.kindId?t.value.kindId:void 0,t.value.zyId?t.value.zyId:void 0,t.value.kcId?t.value.kcId:void 0,t.value.questionType?t.value.questionType:"-1").then(s=>{if(s.code==0){if(s.data.rows.length==0){I({title:"提示",message:"暂无试题",type:"warning"}),i.value=!1;return}o.value=s.data.rows,A(o.value)}else I({title:"提示",message:s.msg,type:"error"});i.value=!1})},A=s=>{s.forEach((e,l)=>{e.questionType==1&&(e.userAnswer?e.userAnswer=e.userAnswer.split(","):e.userAnswer=[])})},T=s=>{s.forEach((e,l)=>{e.questionType==1&&(e.userAnswer?e.userAnswer=e.userAnswer.toString():e.userAnswer="")})},D=()=>{T(o.value),b(),a.value=!0,k()},Q=()=>{a.value||b(),d.value=!1,a.value=!1,k(),p.value++,y()},b=()=>{d.value=!0,h.getWrongQuestionAnalysis(o.value).then(s=>{s.code==0&&(o.value=s.data,A(o.value)),d.value=!1})},k=()=>{let s=setInterval(()=>{let e=window.pageYOffset||document.documentElement.scrollTop||document.body.scrollTop,l=Math.ceil(e/5);document.documentElement.scrollTop=e-l,e===0&&clearInterval(s)},20)},q=s=>{p.value=1,t.value=s,y()};return(s,e)=>{const l=O("el-button"),S=G("loading");return u(),c("div",Y,[_.value?(u(),c("div",H,[r("img",{src:_.value,alt:""},null,8,J)])):g("",!0),r("div",Z,[m(V,{showQuesType:!0,propsData:t.value,onClickProject:q},null,8,["propsData"]),o.value.length>0?K((u(),c("div",$,[(u(!0),c(R,null,U(o.value,(f,N)=>(u(),c("div",{key:N},[m(P,{isSubmit:a.value,item:f},{default:w(()=>[r("div",ee,[v(" 累计做错 "),r("span",null,C(f.wrongAnswersNumber),1),v(" 次，错题率: "),r("span",null,C(f.wrongAnswersRate)+"%",1)])]),_:2},1032,["isSubmit","item"])]))),128)),r("div",se,[a.value?g("",!0):(u(),X(l,{key:0,loading:d.value,class:"submit-btn",onClick:D},{default:w(()=>[v("完成练习 ")]),_:1},8,["loading"])),m(l,{loading:i.value,class:"go-btn",onClick:Q},{default:w(()=>[v("继续答题")]),_:1},8,["loading"])])])),[[S,i.value]]):g("",!0)])])}}}),_e=W(te,[["__scopeId","data-v-16dccf2d"]]);export{_e as default};
