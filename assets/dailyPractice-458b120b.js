import{u as U}from"./vue-router.esm-bundler-0ff22247.js";import{P as M}from"./ProjectOnView-0054b5ca.js";import{Q as R}from"./QuestionView-d6215229.js";import{E as W}from"./examClient-2e75eb72.js";import{A as F}from"./accountClient-16268368.js";import{P as O}from"./publicClient-ee633572.js";import{ae as Q,f as G,r as o,o as K,G as X,X as Y,h as i,j as p,k as _,z as h,t as b,x as H,F as J,V as Z,C as $,v as D,A as P}from"./plugin-vue_export-helper-3a3407bb.js";import{aD as k}from"./webClient-e9003e98.js";import"./enum-245cc125.js";import"./_commonjsHelpers-725317a4.js";const ee={class:"pannel"},ae={key:0,class:"top-banner"},te=["src"],le={class:"content-con"},oe={key:1,class:"question-con"},se={class:"btn-con"},ie=G({__name:"dailyPractice",setup(ne){let B=new O,q=new F,v=new W,s=U();const c=o(),f=o(),w=o(!1),n=o(!1),y=o(!1),u=o(!1),m=o(!1),r=o({}),t=o([]),l=o({schoolId:"",kindId:"",zyId:"",kcId:""});K(async()=>{await q.checkLogIn()&&(await T(),n.value=await s.query.isSubmit?Boolean(s.query.isSubmit):!1,y.value=await s.query.analysis?Boolean(s.query.analysis):!1,c.value=await s.query.questionId?s.query.questionId:"",w.value=await s.query.isAgain?Boolean(s.query.isAgain):!1,n.value&&await I(),w.value&&await A(),await B.getAdvItemByKey("DailyPractice.TopBanner").then(a=>{f.value=a.data.boardUrlTbList[0].picture}))});const x=()=>{m.value=!0,L(t.value),v.addUserDailyPracticeAnswer(r.value).then(e=>{e.code==0&&(n.value=!0,I(),C()),m.value=!1})},I=()=>{v.getDailyPracticeAnalysis(c.value).then(e=>{e.code==0?(c.value=e.data.id,r.value=e.data,t.value=e.data.practiceWrongList,g(t.value)):k({title:"提示",message:e.msg,type:"error"})})},T=()=>{v.getUserDailyPracticeRecord().then(e=>{e.data.state==1&&(l.value={schoolId:e.data.belongCollege,kindId:e.data.belongProject,zyId:e.data.belongMajor,kcId:e.data.belongCourseTitle})})},A=()=>{u.value=!0,r.value={},t.value=[],v.getDailyPracticeTopicList(c.value).then(e=>{e.code==0?e.data&&(r.value=e.data,t.value=e.data.practiceWrongList,g(t.value)):k({title:"提示",message:e.msg,type:"error"}),u.value=!1})},E=()=>{u.value=!0,c.value="",r.value={},t.value=[],v.getDailyPracticeById(l.value.schoolId?l.value.schoolId:void 0,l.value.kindId?l.value.kindId:void 0,l.value.zyId?l.value.zyId:void 0,l.value.kcId?l.value.kcId:void 0).then(e=>{e.code==0?e.data&&(c.value=e.data.id,r.value=e.data,t.value=e.data.practiceWrongList,g(t.value)):k({title:"提示",message:e.msg,type:"error"}),u.value=!1})},g=e=>{e.forEach((a,d)=>{a.questionType==1&&(a.userAnswer?a.userAnswer=a.userAnswer.split(","):a.userAnswer=[])})},L=e=>{e.forEach((a,d)=>{a.questionType==1&&(a.userAnswer?a.userAnswer=a.userAnswer.toString():a.userAnswer="")})},S=()=>{n.value=!1,A(),C()},C=()=>{let e=setInterval(()=>{let a=window.pageYOffset||document.documentElement.scrollTop||document.body.scrollTop,d=Math.ceil(a/5);document.documentElement.scrollTop=a-d,a===0&&clearInterval(e)},20)},j=e=>{l.value=e,n.value=!1,y.value||E()};return(e,a)=>{const d=X("el-button"),V=Y("loading");return i(),p("div",ee,[f.value?(i(),p("div",ae,[_("img",{src:f.value,alt:""},null,8,te)])):h("",!0),_("div",le,[y.value?h("",!0):(i(),b(M,{key:0,propsData:l.value,onClickProject:j},null,8,["propsData"])),t.value.length>0?H((i(),p("div",oe,[(i(!0),p(J,null,Z(t.value,(z,N)=>(i(),p("div",{key:N},[$(R,{isSubmit:n.value,item:z},null,8,["isSubmit","item"])]))),128)),_("div",se,[n.value?(i(),b(d,{key:0,loading:u.value,class:"submit-btn",onClick:S},{default:D(()=>[P("重新答题 ")]),_:1},8,["loading"])):(i(),b(d,{key:1,loading:m.value,class:"submit-btn",onClick:x},{default:D(()=>[P("完成练习")]),_:1},8,["loading"]))])])),[[V,u.value]]):h("",!0)])])}}}),_e=Q(ie,[["__scopeId","data-v-a179900c"]]);export{_e as default};
