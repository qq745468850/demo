import{L as X}from"./learningCenterClient-cc3ac964.js";import{_ as q}from"./plugin-vue_export-helper-c27b6911.js";import{f as K,r as o,I as P,o as Q,G as c,X as W,h as n,j as r,k as i,n as p,t as C,v as _,F as D,V as f,z as b,C as T,x as Z,B as h}from"./runtime-core.esm-bundler-201072b8.js";import"./webClient-2e88593a.js";import"./_commonjsHelpers-725317a4.js";const ee={class:"learningLog-con"},ae={class:"section-title"},le={class:"flex"},ue={class:"flex select-con mt24 mb22"},te={class:"table"},ne={key:0},oe={key:1},se=K({__name:"learningLog",setup(re){let v=new X;const d=o(!1),t=o(1),s=o(1),V=o([]),y=o([]),e=P({timeVal:[],courseId:null,classTypeId:null,total:0,pageNum:1,pageSize:10,list:[]}),g=o([{name:"课程名称",val:"courseName"},{name:"章名称",val:"courseChapterName"},{name:"开始时间",val:"startsTime"},{name:"结束时间",val:"endTime"},{name:"学习时长",val:"second"}]),L=o([{name:"课程名称",val:"courseName"},{name:"章名称",val:"courseChapterName"},{name:"节名称",val:"courseChapterNodeName"},{name:"开始时间",val:"startsTime"},{name:"结束时间",val:"endTime"},{name:"学习时长",val:"second"}]),A=o([{name:"考场名称",val:"roomName"},{name:"班型名称",val:"classTypeName"},{name:"开始时间",val:"answerTime"},{name:"提交时间",val:"submitTime"},{name:"考试时长",val:"second"}]),S=o([{name:"资料名称",val:"materialName"},{name:"资料类型",val:"typeName"},{name:"资料来源",val:"source"},{name:"下载时间",val:"downloadTime"}]);Q(()=>{$(),I()});const I=()=>{d.value=!0,v.getCourseLearningJournal({pageNum:e.pageNum,pageSize:e.pageSize,type:s.value,courseType:t.value,classTypeId:e.classTypeId?e.classTypeId:"",courseId:e.courseId?e.courseId:"",startTime:e.timeVal?e.timeVal[0]:"",endTime:e.timeVal?e.timeVal[1]:""}).then(a=>{e.list=a.data.rows,e.total=a.data.total,d.value=!1})},z=()=>{d.value=!0,v.getRoomLearningJournal({pageNum:e.pageNum,pageSize:e.pageSize,type:s.value,classTypeId:e.classTypeId?e.classTypeId:"",courseId:e.courseId?e.courseId:"",startTime:e.timeVal?e.timeVal[0]:"",endTime:e.timeVal?e.timeVal[1]:""}).then(a=>{e.list=a.data.rows,e.total=a.data.total,d.value=!1})},x=()=>{d.value=!0,v.getMaterialLearningJournal({pageNum:e.pageNum,pageSize:e.pageSize,type:s.value,classTypeId:e.classTypeId?e.classTypeId:"",courseId:e.courseId?e.courseId:"",startTime:e.timeVal?e.timeVal[0]:"",endTime:e.timeVal?e.timeVal[1]:""}).then(a=>{e.list=a.data.rows,e.total=a.data.total,d.value=!1})},m=()=>{e.pageNum=1,B(t.value)},M=()=>{v.getStudentCourse({classTypeId:e.classTypeId?e.classTypeId:""}).then(a=>{console.log("课程",a),y.value=a.data})},B=a=>{switch(t.value=a,e.list=[],a){case 1:g.value=[{name:"课程名称",val:"courseName"},{name:"章名称",val:"courseChapterName"},{name:"开始时间",val:"startsTime"},{name:"结束时间",val:"endTime"},{name:"学习时长",val:"second"}],I();break;case 2:g.value=L.value,I();break;case 3:g.value=A.value,z();break;case 4:g.value=S.value,x();break}},$=async()=>{await v.getMyCourseList().then(a=>{var l;console.log("popopo",a),(l=a.data)!=null&&l.length&&(e.classTypeId=a.data[0].id),V.value=a.data})},k=a=>{s.value=a,e.classTypeId=null,e.courseId=null,e.timeVal=[],e.pageNum=1,t.value=1,y.value=[],a==2&&Y(),B(t.value)},Y=()=>{v.getSingleCourse().then(a=>{if(console.log("k",a),a.data.length>0){for(let l of a.data)l.courseId=l.id;y.value=a.data}})},J=a=>{e.pageNum=a,B(t.value)};return(a,l)=>{const E=c("el-option"),N=c("el-select"),H=c("el-date-picker"),U=c("el-col"),R=c("el-table-column"),j=c("el-table"),G=c("el-pagination"),O=W("loading");return n(),r("div",ee,[i("div",ae,[i("div",{class:p(s.value==1?"item on":"item"),onClick:l[0]||(l[0]=u=>k(1))},"班型",2),i("div",{class:p(s.value==2?"item on":"item"),onClick:l[1]||(l[1]=u=>k(2))},"课程",2)]),i("div",le,[s.value==1?(n(),C(N,{key:0,clearable:"",modelValue:e.classTypeId,"onUpdate:modelValue":l[2]||(l[2]=u=>e.classTypeId=u),placeholder:"请选择班型",class:"mr18",onChange:l[3]||(l[3]=u=>(e.courseId=null,M(),m()))},{default:_(()=>[(n(!0),r(D,null,f(V.value,(u,F)=>(n(),C(E,{label:u.name,value:u.id,key:F},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])):b("",!0),T(N,{clearable:"",modelValue:e.courseId,"onUpdate:modelValue":l[4]||(l[4]=u=>e.courseId=u),placeholder:"请选择课程",onChange:l[5]||(l[5]=u=>m()),class:"mr18"},{default:_(()=>[(n(!0),r(D,null,f(y.value,(u,F)=>(n(),C(E,{label:u.courseName,value:u.courseId,key:F},null,8,["label","value"]))),128))]),_:1},8,["modelValue"]),T(U,{span:4},{default:_(()=>[T(H,{clearable:"",modelValue:e.timeVal,"onUpdate:modelValue":l[6]||(l[6]=u=>e.timeVal=u),type:"daterange","range-separator":"-","start-placeholder":"开始日期","end-placeholder":"结束日期",format:"YYYY-MM-DD","value-format":"YYYY-MM-DD",onChange:l[7]||(l[7]=u=>m())},null,8,["modelValue"])]),_:1})]),i("div",ue,[i("div",{class:p({on:t.value==1}),onClick:l[8]||(l[8]=u=>(t.value=1,m()))},"直播",2),i("div",{class:p({on:t.value==2}),onClick:l[9]||(l[9]=u=>(t.value=2,m()))},"录播",2),s.value==1?(n(),r("div",{key:0,class:p({on:t.value==3}),onClick:l[10]||(l[10]=u=>(t.value=3,m()))},"考场",2)):b("",!0),i("div",{class:p({on:t.value==4}),onClick:l[11]||(l[11]=u=>(t.value=4,m()))},"资料",2)]),Z((n(),r("div",te,[T(j,{data:e.list,style:{width:"100%"},"tooltip-effect":"light"},{default:_(()=>[(n(!0),r(D,null,f(g.value,(u,F)=>(n(),C(R,{"show-overflow-tooltip":"",key:F,label:u.name,align:"center"},{default:_(w=>[u.val=="second"?(n(),r("span",ne,h(w.row.second)+"s",1)):(n(),r("span",oe,h(w.row[u.val]),1))]),_:2},1032,["label"]))),128))]),_:1},8,["data"]),e.list.length>0?(n(),C(G,{key:0,background:"",layout:" prev, pager, next",total:e.total,"page-size":e.pageSize,"current-page":e.pageNum,onCurrentChange:J},null,8,["total","page-size","current-page"])):b("",!0)])),[[O,d.value]])])}}}),pe=q(se,[["__scopeId","data-v-8cf75d2c"]]);export{pe as default};
