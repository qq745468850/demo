import{Q as j}from"./QuestionView-c9e32ec5.js";import{U as G}from"./userClient-1707b307.js";import{_ as O}from"./plugin-vue_export-helper-c27b6911.js";import{f as X,r as t,o as Y,G as B,X as H,h as n,j as d,k as v,C as u,v as c,F as V,V as U,t as w,x as J,A as i,B as x,z as K}from"./runtime-core.esm-bundler-201072b8.js";import"./enum-012db698.js";import"./webClient-2e88593a.js";import"./commonjsHelpers-725317a4.js";const P={class:"search-con"},R={key:0,class:"question-con"},Z={class:"showError"},$={class:"tag1"},ee={class:"tag2"},le={class:"tag3"},ae={key:2,class:"btn-con"},oe=X({__name:"myWrongQuestions",setup(ue){let y=new G;const p=t(),_=t(""),m=t(""),C=t(1),W=t(10),r=t(!1),g=t(!1),f=t(!1),s=t([]),N=t([]);Y(async()=>{await D(),await b()});const D=()=>{y.getUserWrongTopicCourseName().then(l=>{N.value=l.data})},b=()=>{g.value=!0,r.value=!1,s.value=[],y.getUserWrongTopic(C.value,W.value,_.value?_.value:void 0,p.value?p.value:"-1",m.value?m.value:void 0).then(l=>{l.code==0&&(s.value=l.data.rows,S(s.value)),g.value=!1})},S=l=>{l.forEach((e,o)=>{e.questionType==1&&(e.userAnswer?e.userAnswer=e.userAnswer.split(","):e.userAnswer=[])})},F=l=>{l.forEach((e,o)=>{e.questionType==1&&(e.userAnswer?e.userAnswer=e.userAnswer.toString():e.userAnswer="")})},q=()=>{F(s.value),L(),r.value=!0,h()},Q=()=>{r.value=!1,C.value++,b(),h()},L=()=>{f.value=!0,y.updateUserWrongTopic(s.value).then(l=>{l.code==0&&(s.value=l.data,S(s.value)),f.value=!1})},E=()=>{r.value=!1,C.value=1,b(),h()},I=()=>{f.value=!1,r.value=!1,b(),h()},h=()=>{let l=setInterval(()=>{let e=window.pageYOffset||document.documentElement.scrollTop||document.body.scrollTop,o=Math.ceil(e/5);document.documentElement.scrollTop=e-o,e===0&&clearInterval(l)},20)};return(l,e)=>{const o=B("el-option"),A=B("el-select"),z=B("el-empty"),k=B("el-button"),M=H("loading");return n(),d(V,null,[v("div",P,[u(A,{clearable:"",placeholder:"请选择课程",style:{width:"340px"},modelValue:_.value,"onUpdate:modelValue":e[0]||(e[0]=a=>_.value=a),onChange:E},{default:c(()=>[(n(!0),d(V,null,U(N.value,(a,T)=>(n(),w(o,{label:a.kcName,value:a.id,key:T},null,8,["label","value"]))),128))]),_:1},8,["modelValue"]),u(A,{clearable:"",placeholder:"请选择题型",modelValue:p.value,"onUpdate:modelValue":e[1]||(e[1]=a=>p.value=a),onChange:E},{default:c(()=>[u(o,{label:"全部",value:"-1"}),u(o,{label:"单选",value:"0"}),u(o,{label:"多选",value:"1"}),u(o,{label:"判断",value:"2"})]),_:1},8,["modelValue"]),u(A,{clearable:"",placeholder:"请选择错题次数",modelValue:m.value,"onUpdate:modelValue":e[2]||(e[2]=a=>m.value=a),onChange:E},{default:c(()=>[u(o,{label:"1-10次",value:"1-10"}),u(o,{label:"11-20次",value:"11-20"}),u(o,{label:"20次以上",value:"20"})]),_:1},8,["modelValue"])]),s.value.length>0?J((n(),d("div",R,[(n(!0),d(V,null,U(s.value,(a,T)=>(n(),d("div",{key:T},[u(j,{isSubmit:r.value,item:a},{default:c(()=>[v("div",Z,[i(" 本题已做 "),v("span",$,x(a.answersNumber),1),i(" 次 做错 "),v("span",ee,x(a.wrongAnswersNumber),1),i(" 次 做对 "),v("span",le,x(a.correctAnswersNumber),1),i(" 次 ")])]),_:2},1032,["isSubmit","item"])]))),128))])),[[M,g.value]]):(n(),w(z,{key:1,description:"暂无试题",style:{"margin-top":"100px"}})),s.value.length>0?(n(),d("div",ae,[r.value?(n(),w(k,{key:0,class:"reset-btn",onClick:I},{default:c(()=>[i("重新答题")]),_:1})):(n(),w(k,{key:1,loading:f.value,onClick:q},{default:c(()=>[i("完成练习")]),_:1},8,["loading"])),u(k,{loading:g.value,class:"go-btn",onClick:Q},{default:c(()=>[i("继续答题")]),_:1},8,["loading"])])):K("",!0)],64)}}}),ve=O(oe,[["__scopeId","data-v-6e9e0803"]]);export{ve as default};
