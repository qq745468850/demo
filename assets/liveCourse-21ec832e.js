import{aE as ue,N as ne,aD as ce}from"./webClient-2e88593a.js";import{_ as re}from"./yhq-f3b33ba2.js";import{_ as de}from"./noresource-15f96cd0.js";import{u as ve}from"./vue-router.esm-bundler-926c5a09.js";import{E as _e}from"./evaluatView-3e999aa8.js";import{D as G}from"./DataView-5ecd7284.js";import{Q as me}from"./QuesBankView-8b9b466f.js";import{C as he}from"./coachClient-6606bd3e.js";import{A as pe}from"./accountClient-b6fbd578.js";import{P as ye}from"./publicClient-90b64d32.js";import{O as ke}from"./orderClient-3c76ba2d.js";import{_ as Ce}from"./plugin-vue_export-helper-c27b6911.js";import{f as fe,r as n,o as Be,G as D,X as ge,h as s,j as o,k as t,x as Q,B as v,C as _,A as L,F as V,V as P,z as u,n as h,t as R,v as I,af as De,ag as Ee}from"./runtime-core.esm-bundler-201072b8.js";import"./_commonjsHelpers-725317a4.js";import"./learningCenterClient-cc3ac964.js";const C=f=>(De("data-v-e7930ef0"),f=f(),Ee(),f),Fe={class:"pannel"},Ae={class:"top-div"},we={key:0,class:"top-div-con","element-loading-text":"加载中..."},be={class:"top-div-info"},Le={class:"info-left"},Ve=["src"],Pe=C(()=>t("div",{class:"nav"},[t("div",{class:"nav-like"},[t("span",{class:"tip"},"温馨提示：本课程可在手机端观看")])],-1)),Ie={class:"info-right"},$e={class:"title-con"},Se=C(()=>t("div",{class:"tag"},"直播",-1)),xe=["title"],Ne={class:"teacher"},Te={class:"tea-img"},qe=["src"],Ue={class:"name"},ze={class:"price label"},Me={class:"new-price"},He={class:"old-price"},Oe={class:"yhq-con"},Ge={key:0,class:"yhq-item"},Qe={class:"tip"},Re=["onClick"],je={key:1,class:"btn"},We={key:1,class:"yhq-item"},Xe={class:"tip"},Je=["onClick"],Ke={key:1,class:"btn"},Ye=["href"],Ze=C(()=>t("img",{src:re},null,-1)),et={class:"buy-btn"},tt={key:1,class:"btn1"},st={class:"content-div"},ot={class:"content-left"},it={class:"left-nav"},at={key:0,class:"tag"},lt=["innerHTML"],ut={class:"con-zhang"},nt={key:0},ct={class:"item"},rt=["title"],dt={class:"name"},vt={key:0,class:"iconfont iconbofang"},_t=["onClick"],mt={key:3,class:"name-btn btn2"},ht={key:4,class:"name-btn btn3"},pt={key:5,class:"name-btn btn3"},yt={key:6,class:"name-btn btn4"},kt={class:"time"},Ct={class:"btn"},ft=["onClick"],Bt=["onClick"],gt=["onClick"],Dt={key:1,class:"con-data"},Et={key:2,class:"con-test"},Ft={key:3,class:"con-evaluate mt17"},At={class:"content-right"},wt=C(()=>t("div",{class:"right-title"},"推荐课程",-1)),bt=["onClick"],Lt=["src"],Vt={class:"con"},Pt={class:"title twoEllipsis"},It={class:"tea"},$t={class:"tea-img"},St=["src"],xt={class:"label oneEllipsis"},Nt=C(()=>t("div",{class:"noBuy"},[t("img",{src:de}),t("div",{class:"danger"},"您尚未购买此课程")],-1)),Tt={class:"freeDialog"},qt=["src"],Ut=fe({__name:"liveCourse",setup(f){let p=new he,B=new pe,j=new ye,$=new ke;const E=n(!1),W=ve(),S=n(!1),c=n(1),r=n(),l=n({}),x=n(null),d=n(!1),g=n(!1),F=n(!1),A=n(!1),N=n(""),T=n([]),q=n([]),U=n([]),z=n([]),w=n([]);Be(()=>{r.value=W.query.id,X(),K(),Y(),Z(),J(),M(),x.value=ue(),x.value&&j.checkIsOrder(1,r.value).then(a=>{d.value=a})});const X=()=>{E.value=!0,p.queryCourseDetails(r.value).then(a=>{for(let i of a.data.liveList)i.limitPlayLink&&(S.value=!0);l.value=a.data,l.value.evaluateScore=5,document.title=a.data.courseName,E.value=!1})},J=()=>{p.addFrequency(r.value)},K=()=>{p.queryCourseRecommend(1,5).then(a=>{T.value=a.data})},M=()=>{$.getMarketCouponsProList(1,r.value).then(a=>{w.value=a.data.length>0?a.data:[]})},H=async a=>{if(await B.checkLogIn()){let y=await $.getCoupon(a);y.code==0&&M(),ce({title:"提示",message:y.msg,type:"success",duration:2e3})}},Y=()=>{p.getCourseDocs(r.value).then(a=>{U.value=a.data})},Z=()=>{p.getCoursePapers(r.value).then(a=>{z.value=a.data})},ee=a=>{N.value=a,A.value=!0},O=async a=>{await B.checkLogIn()&&(d.value?(F.value=!0,q.value=a):g.value=!0)},te=async(a,i)=>{await B.checkLogIn()&&(d.value?window.location.href=`/questionBank/examDetails?id=${i}&examType=${16}&courseId=${r.value}&chapterId=${a}`:g.value=!0)},se=async()=>{await B.checkLogIn()&&(window.location.href=`/order/chooseGoods?itemType=1&itemId=${r.value}`)},oe=(a,i)=>{a==1?window.open(`/coachcourse/liveCourse?id=${i}`):window.open(`/coachcourse/videoCourse?id=${i}`)};return(a,i)=>{const y=D("el-rate"),ie=D("el-svg-icon"),ae=D("el-empty"),b=D("el-dialog"),le=ge("loading");return s(),o("div",Fe,[t("div",Ae,[l.value?Q((s(),o("div",we,[t("div",be,[t("div",Le,[t("img",{class:"img",src:l.value.surfacePlot},null,8,Ve),Pe]),t("div",Ie,[t("div",$e,[Se,t("div",{class:"title oneEllipsis",title:l.value.courseName},v(l.value.courseName),9,xe)]),t("div",Ne,[t("div",Te,[t("img",{src:l.value.teacherPortrait,alt:""},null,8,qe)]),t("div",Ue,"讲师："+v(l.value.teacherName),1),_(y,{modelValue:l.value.evaluateScore,"onUpdate:modelValue":i[0]||(i[0]=e=>l.value.evaluateScore=e),disabled:""},null,8,["modelValue"])]),t("div",ze,[L(" 价格："),t("span",Me,"￥"+v(l.value.currentPrice),1),t("span",He,"￥"+v(l.value.originalPrice?l.value.originalPrice:0),1)]),t("div",Oe,[(s(!0),o(V,null,P(w.value.slice(0,3),(e,k)=>(s(),o("div",{class:"yhq",key:k},[e.couponType==1?(s(),o("div",Ge,[t("div",Qe,"无门槛券"+v(e.discountAmount)+"元",1),e.receiveStatus==0?(s(),o("div",{key:0,class:"btn pointer",onClick:m=>H(e.couponId)},"立即领取>>",8,Re)):(s(),o("div",je,"已领取"))])):u("",!0),e.couponType==2?(s(),o("div",We,[t("div",Xe,"每满"+v(e.limitPrice)+"减"+v(e.discountAmount),1),e.receiveStatus==0?(s(),o("div",{key:0,class:"btn pointer",onClick:m=>H(e.couponId)},"立即领取>>",8,Je)):(s(),o("div",Ke,"已领取"))])):u("",!0)]))),128)),w.value.length>3?(s(),o("a",{key:0,href:`/couponCenter?type=1&id=${r.value}`,target:"_blank",class:"yhq-more pointer"},[Ze,L(" 领取更多优惠券 ")],8,Ye)):u("",!0)]),t("div",et,[d.value?(s(),o("div",tt,"已购买")):(s(),o("div",{key:0,class:"btn1 pointer",onClick:se}," 立即购买 "))])])])])),[[le,E.value]]):u("",!0)]),t("div",st,[t("div",ot,[t("div",it,[t("div",{class:h(["left-nav-item pointer",{xuan:c.value==1}]),onClick:i[1]||(i[1]=e=>c.value=1)}," 课程详情 ",2),t("div",{class:h(["left-nav-item pointer",{xuan:c.value==2}]),onClick:i[2]||(i[2]=e=>c.value=2)},[L(" 课程列表 "),S.value?(s(),o("div",at,"试看")):u("",!0)],2),t("div",{class:h(["left-nav-item pointer",{xuan:c.value==3}]),onClick:i[3]||(i[3]=e=>c.value=3)}," 课程资料 ",2),t("div",{class:h(["left-nav-item pointer",{xuan:c.value==4}]),onClick:i[4]||(i[4]=e=>c.value=4)}," 课程测试 ",2),t("div",{class:h(["left-nav-item pointer",{xuan:c.value==5}]),onClick:i[5]||(i[5]=e=>c.value=5)}," 课程评价 ",2)]),c.value==1&&l.value?(s(),o("div",{key:0,class:"con-html",innerHTML:l.value.summarizeContent},null,8,lt)):u("",!0),Q(t("div",ut,[l.value.liveList&&l.value.liveList.length>0?(s(),o("div",nt,[(s(!0),o(V,null,P(l.value.liveList,(e,k)=>(s(),o("div",{class:"zhang-item",key:k},[t("div",ct,[t("div",{class:"title",title:e.liveChapterName},[t("div",dt,[d.value?(s(),o("i",vt)):(s(),R(ie,{key:1,name:"Lock",style:{"margin-right":"10px"},size:18})),t("div",{class:h(["name-title oneEllipsis",d.value?"":"label"])},v(e.liveChapterName),3),e.limitPlayLink?(s(),o("div",{key:2,class:"name-btn btn1 pointer",onClick:m=>ee(e.limitPlayLink)}," 免费试看 ",8,_t)):u("",!0),e.liveCourseStatus==2?(s(),o("div",mt," 回放生成中 ")):u("",!0),e.liveCourseStatus==3&&(e.aliVideoUrl!=""||e.others!=""||e.limitPlaySec!=""||e.ccPlaybackId!="")&&!e.limitPlayLink?(s(),o("div",ht," 回放中 ")):u("",!0),e.liveCourseStatus==1?(s(),o("div",pt," 正在直播中 ")):u("",!0),e.liveCourseStatus==0?(s(),o("div",yt," 直播未开始 ")):u("",!0)]),t("div",kt,v(e.liveStartTime)+" - "+v(e.liveEndTime),1)],8,rt),t("div",Ct,[e.whetherAttachment==1?(s(),o("div",{key:0,class:"pointer",onClick:m=>O(e.attachmentList)}," 随堂课件 ",8,ft)):u("",!0),e.whetherMeans==1?(s(),o("div",{key:1,class:"pointer",onClick:m=>O(e.meansList)}," 随堂资料 ",8,Bt)):u("",!0),e.whetherPaper==1?(s(),o("div",{key:2,class:"pointer",onClick:m=>te(e.nodeId,e.paperId)}," 随堂测试 ",8,gt)):u("",!0)])])]))),128))])):(s(),R(ae,{key:1,description:"暂无数据~"}))],512),[[ne,c.value==2]]),c.value==3?(s(),o("div",Dt,[_(G,{isBuy:d.value,courseIsBuy:d.value,items:U.value},null,8,["isBuy","courseIsBuy","items"])])):u("",!0),c.value==4?(s(),o("div",Et,[_(me,{isBuy:d.value,examType:15,courseId:r.value,papers:z.value},null,8,["isBuy","courseId","papers"])])):u("",!0),c.value==5?(s(),o("div",Ft,[_(_e,{isBuy:d.value,type:6,typeId:r.value},null,8,["isBuy","typeId"])])):u("",!0)]),t("div",At,[wt,(s(!0),o(V,null,P(T.value,(e,k)=>(s(),o("div",{class:"item pointer",key:k,onClick:m=>oe(e.courseType,e.courseId)},[t("img",{class:"item-img",src:e.surfacePlot},null,8,Lt),t("div",Vt,[t("div",Pt,v(e.courseName),1),t("div",It,[t("div",$t,[t("img",{src:e.teacherPortrait,alt:""},null,8,St)]),t("span",xt,"讲师："+v(e.teacherName),1)])])],8,bt))),128))])]),_(b,{width:"720px",modelValue:F.value,"onUpdate:modelValue":i[6]||(i[6]=e=>F.value=e)},{default:I(()=>[_(G,{isBuy:d.value,courseIsBuy:d.value,items:q.value},null,8,["isBuy","courseIsBuy","items"])]),_:1},8,["modelValue"]),_(b,{width:"30%",modelValue:g.value,"onUpdate:modelValue":i[7]||(i[7]=e=>g.value=e)},{default:I(()=>[Nt]),_:1},8,["modelValue"]),_(b,{width:"45%",modelValue:A.value,"onUpdate:modelValue":i[8]||(i[8]=e=>A.value=e),"destroy-on-close":!0},{default:I(()=>[t("div",Tt,[t("video",{src:N.value,controls:""},null,8,qt)])]),_:1},8,["modelValue"])])}}}),ts=Ce(Ut,[["__scopeId","data-v-e7930ef0"]]);export{ts as default};
