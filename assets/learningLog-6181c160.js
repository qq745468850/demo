import{L as X}from"./learningCenterClient-fe7fe350.js";import{ae as q,f as K,r as o,I as P,o as Q,G as c,X as W,h as n,j as r,k as i,n as p,t as C,v as _,F as B,V as b,z as f,C as T,x as Z,B as h}from"./plugin-vue_export-helper-3a3407bb.js";import"./webClient-e9003e98.js";import"./_commonjsHelpers-725317a4.js";const ee={class:"learningLog-con"},ae={class:"section-title"},le={class:"flex"},ue={class:"flex select-con mt24 mb22"},te={class:"table"},ne={key:0},oe={key:1},se=K({__name:"learningLog",setup(re){let v=new X;const d=o(!1),t=o(1),s=o(1),V=o([]),y=o([]),e=P({timeVal:[],courseId:null,classTypeId:null,total:0,pageNum:1,pageSize:10,list:[]}),g=o([{name:"课程名称",val:"courseName"},{name:"章名称",val:"courseChapterName"},{name:"开始时间",val:"startsTime"},{name:"结束时间",val:"endTime"},{name:"学习时长",val:"second"}]),L=o([{name:"课程名称",val:"courseName"},{name:"章名称",val:"courseChapterName"},{name:"节名称",val:"courseChapterNodeName"},{name:"开始时间",val:"startsTime"},{name:"结束时间",val:"endTime"},{name:"学习时长",val:"second"}]),A=o([{name:"考场名称",val:"roomName"},{name:"班型名称",val:"classTypeName"},{name:"开始时间",val:"answerTime"},{name:"提交时间",val:"submitTime"},{name:"考试时长",val:"second"}]),S=o([{name:"资料名称",val:"materialName"},{name:"资料类型",val:"typeName"},{name:"资料来源",val:"source"},{name:"下载时间",val:"downloadTime"}]);Q(()=>{$(),D()});const D=()=>{d.value=!0,v.getCourseLearningJournal({pageNum:e.pageNum,pageSize:e.pageSize,type:s.value,courseType:t.value,classTypeId:e.classTypeId?e.classTypeId:"",courseId:e.courseId?e.courseId:"",startTime:e.timeVal?e.timeVal[0]:"",endTime:e.timeVal?e.timeVal[1]:""}).then(l=>{e.list=l.data.rows,e.total=l.data.total,d.value=!1})},z=()=>{d.value=!0,v.getRoomLearningJournal({pageNum:e.pageNum,pageSize:e.pageSize,type:s.value,classTypeId:e.classTypeId?e.classTypeId:"",courseId:e.courseId?e.courseId:"",startTime:e.timeVal?e.timeVal[0]:"",endTime:e.timeVal?e.timeVal[1]:""}).then(l=>{e.list=l.data.rows,e.total=l.data.total,d.value=!1})},x=()=>{d.value=!0,v.getMaterialLearningJournal({pageNum:e.pageNum,pageSize:e.pageSize,type:s.value,classTypeId:e.classTypeId?e.classTypeId:"",courseId:e.courseId?e.courseId:"",startTime:e.timeVal?e.timeVal[0]:"",endTime:e.timeVal?e.timeVal[1]:""}).then(l=>{e.list=l.data.rows,e.total=l.data.total,d.value=!1})},m=()=>{e.pageNum=1,I(t.value)},M=()=>{v.getStudentCourse({classTypeId:e.classTypeId?e.classTypeId:""}).then(l=>{y.value=l.data})},I=l=>{switch(t.value=l,e.list=[],l){case 1:g.value=[{name:"课程名称",val:"courseName"},{name:"章名称",val:"courseChapterName"},{name:"开始时间",val:"startsTime"},{name:"结束时间",val:"endTime"},{name:"学习时长",val:"second"}],D();break;case 2:g.value=L.value,D();break;case 3:g.value=A.value,z();break;case 4:g.value=S.value,x();break}},$=async()=>{await v.getMyCourseList().then(l=>{V.value=l.data})},N=l=>{s.value=l,e.classTypeId=null,e.courseId=null,e.timeVal=[],e.pageNum=1,t.value=1,y.value=[],l==2&&Y(),I(t.value)},Y=()=>{v.getSingleCourse().then(l=>{if(l.data.length>0){for(let a of l.data)a.courseId=a.id;y.value=l.data}})},J=l=>{e.pageNum=l,I(t.value)};return(l,a)=>{const k=c("el-option"),E=c("el-select"),H=c("el-date-picker"),U=c("el-col"),R=c("el-table-column"),j=c("el-table"),G=c("el-pagination"),O=W("loading");return n(),r("div",ee,[i("div",ae,[i("div",{class:p(s.value==1?"item on":"item"),onClick:a[0]||(a[0]=u=>N(1))},"班型",2),i("div",{class:p(s.value==2?"item on":"item"),onClick:a[1]||(a[1]=u=>N(2))},"课程",2)]),i("div",le,[s.value==1?(n(),C(E,{key:0,clearable:"",modelValue:e.classTypeId,"onUpdate:modelValue":a[2]||(a[2]=u=>e.classTypeId=u),placeholder:"请选择班型",class:"mr18",onChange:a[3]||(a[3]=u=>(e.courseId=null,M(),m()))},{default:_(()=>[(n(!0),r(B,null,b(V.value,(u,F)=>(n(),C(k,{label:u.name,value:u.id,key:F},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])):f("",!0),T(E,{clearable:"",modelValue:e.courseId,"onUpdate:modelValue":a[4]||(a[4]=u=>e.courseId=u),placeholder:"请选择课程",onChange:a[5]||(a[5]=u=>m()),class:"mr18"},{default:_(()=>[(n(!0),r(B,null,b(y.value,(u,F)=>(n(),C(k,{label:u.courseName,value:u.courseId,key:F},null,8,["label","value"]))),128))]),_:1},8,["modelValue"]),T(U,{span:4},{default:_(()=>[T(H,{clearable:"",modelValue:e.timeVal,"onUpdate:modelValue":a[6]||(a[6]=u=>e.timeVal=u),type:"daterange","range-separator":"-","start-placeholder":"开始日期","end-placeholder":"结束日期",format:"YYYY-MM-DD","value-format":"YYYY-MM-DD",onChange:a[7]||(a[7]=u=>m())},null,8,["modelValue"])]),_:1})]),i("div",ue,[i("div",{class:p({on:t.value==1}),onClick:a[8]||(a[8]=u=>(t.value=1,m()))},"直播",2),i("div",{class:p({on:t.value==2}),onClick:a[9]||(a[9]=u=>(t.value=2,m()))},"录播",2),s.value==1?(n(),r("div",{key:0,class:p({on:t.value==3}),onClick:a[10]||(a[10]=u=>(t.value=3,m()))},"考场",2)):f("",!0),i("div",{class:p({on:t.value==4}),onClick:a[11]||(a[11]=u=>(t.value=4,m()))},"资料",2)]),Z((n(),r("div",te,[T(j,{data:e.list,style:{width:"100%"},"tooltip-effect":"light"},{default:_(()=>[(n(!0),r(B,null,b(g.value,(u,F)=>(n(),C(R,{"show-overflow-tooltip":"",key:F,label:u.name,align:"center"},{default:_(w=>[u.val=="second"?(n(),r("span",ne,h(w.row.second)+"s",1)):(n(),r("span",oe,h(w.row[u.val]),1))]),_:2},1032,["label"]))),128))]),_:1},8,["data"]),e.list.length>0?(n(),C(G,{key:0,background:"",layout:" prev, pager, next",total:e.total,"page-size":e.pageSize,"current-page":e.pageNum,onCurrentChange:J},null,8,["total","page-size","current-page"])):f("",!0)])),[[O,d.value]])])}}}),ve=q(se,[["__scopeId","data-v-5f88a8b9"]]);export{ve as default};
