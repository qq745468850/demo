import{_ as $}from"./line-2545f1db.js";import{_ as q}from"./hot-4e4545bf.js";import{A as x}from"./AliPlayer-41cb06a0.js";import{u as T}from"./vue-router.esm-bundler-926c5a09.js";import{A as Y}from"./accountClient-b6fbd578.js";import{O}from"./openClient-8733bfdd.js";import{C as V}from"./coachClient-6606bd3e.js";import{_ as M}from"./plugin-vue_export-helper-c27b6911.js";import{f as j,r as u,a as z,o as H,h as o,j as n,k as e,B as l,A as F,z as d,t as R,F as U,V as G,af as J,ag as K}from"./runtime-core.esm-bundler-201072b8.js";import"./jquery-0491babd.js";import"./_commonjsHelpers-725317a4.js";import"./webClient-2e88593a.js";const c=r=>(J("data-v-40d69be5"),r=r(),K(),r),Q={key:0,class:"pannel"},W={class:"video-pannel"},X={class:"video-con"},Z={class:"video-left",style:{width:"100%"}},ee={class:"video-title"},te=["title"],se={class:"teacher"},oe={class:"tea-img"},ue=["src"],ne={key:0,class:"player-Prompt"},ie=c(()=>e("div",{class:"icon"},[e("i",{class:"iconfont iconzhuyi"})],-1)),ae=c(()=>e("div",{class:"text"}," 课程视频版权所有，禁止任何形式得转载！并未经本公司书面许可的使用行为，我公司均保留追究法律责任的权利。 ",-1)),ce=c(()=>e("i",{class:"iconfont iconguanbi"},null,-1)),le={class:"player-main",style:{width:"100%",height:"675px"}},de={class:"content-con"},re={class:"con-ago"},_e=c(()=>e("div",{class:"ago-title"},[e("span",{class:"title"},"推荐公开课"),e("img",{src:$,alt:""})],-1)),ve={class:"list"},pe={class:"item-con"},me=["src"],he={class:"con-info"},Ce={class:"title twoEllipsis"},Fe={class:"num-con"},fe=c(()=>e("div",{class:"tag"},"限免",-1)),ye={class:"num"},ke=c(()=>e("img",{src:q,alt:""},null,-1)),Be={class:"time-con"},Ee={class:"time"},ge={key:1,class:"btn btn2"},De=["onClick"],Ae={key:3,class:"btn btn4"},be=["onClick"],we=j({__name:"openLiveback",setup(r){let v=new O,f=new Y,p=new V;const y=u(!0),A=T(),m=u(),i=u({}),b=u({}),k=u([{}]),h=u(""),C=u(""),B=u(""),_=u("");z(()=>{p.receiveCourse(1)}),H(async()=>{m.value=A.query.id,b.value=await f.checkLogIn(),E(),w(),S()});const E=()=>{v.getDetail(m.value).then(s=>{i.value=s.data,document.title=s.data.openCourseName})},w=()=>{v.queryOpenRecommend(1,12).then(s=>{k.value=s.data.rows})},S=()=>{p.queryCourseTasks().then(s=>{console.log("沿海公路的出口",s),B.value=s.data.time,_.value=s.data.frequency})},g=async(s,a)=>{await f.checkLogIn()&&(s==1?window.location.href=`/openLive?id=${a}`:window.location.href=`/openLiveback?id=${a}`)},I=()=>{_.value!=0&&(h.value=setInterval(()=>{C.value++,B.value===C.value&&(p.receiveTaskProfit(10),C.value=0,_.value--,_.value<=0&&clearInterval(h.value))}))},L=()=>{clearInterval(h.value)},P=()=>{v.addOpenScheduled(m.value).then(s=>{s.code==0&&E()})};return(s,a)=>i.value?(o(),n("div",Q,[e("div",W,[e("div",X,[e("div",Z,[e("div",ee,[e("div",{class:"title oneEllipsis",title:i.value.openCourseName},l(i.value.openCourseName),9,te),e("div",se,[e("div",oe,[e("img",{src:i.value.teacherPortrait,alt:""},null,8,ue)]),F(" 讲师："+l(i.value.teacherName),1)])]),y.value?(o(),n("div",ne,[ie,ae,e("div",{class:"player-Prompt-close",onClick:a[0]||(a[0]=t=>y.value=!1)},[F(" 关闭 "),ce])])):d("",!0),e("div",le,[i.value.playbackLink?(o(),R(x,{key:0,url:i.value.playbackLink,onPlay:I,onSuspendPlay:L},null,8,["url"])):d("",!0)])])])]),e("div",de,[e("div",re,[_e,e("div",ve,[(o(!0),n(U,null,G(k.value,(t,N)=>(o(),n("div",{class:"list-item",key:N},[e("div",pe,[e("img",{src:t.surfacePlot,alt:""},null,8,me),e("div",he,[e("div",Ce,l(t.openCourseName),1),e("div",Fe,[fe,e("div",ye,[ke,F(" "+l(t.heatDegree)+"人气值 ",1)])])])]),e("div",Be,[e("div",Ee,"开播时间："+l(s.$dayjs(t.liveStartTime).format("YYYY-MM-DD HH:mm")),1),t.liveCourseStatus==0&&t.scheduledStatus==0?(o(),n("div",{key:0,class:"btn btn1",onClick:a[1]||(a[1]=D=>P())},"立即预约")):d("",!0),t.liveCourseStatus==0&&t.scheduledStatus==1?(o(),n("div",ge,"预约成功 ")):t.liveCourseStatus==1?(o(),n("div",{key:2,class:"btn btn3",onClick:D=>g(1,t.openCourseId)},"进入直播 ",8,De)):t.liveCourseStatus==2?(o(),n("div",Ae,"回放生成中")):t.liveCourseStatus==3?(o(),n("div",{key:4,class:"btn btn5",onClick:D=>g(2,t.openCourseId)},"观看课程 ",8,be)):d("",!0)])]))),128))])])])])):d("",!0)}}),Me=M(we,[["__scopeId","data-v-40d69be5"]]);export{Me as default};
