import{u as O}from"./vue-router.esm-bundler-926c5a09.js";import{P as R}from"./ProjectOnView-2e385455.js";import{Q as U}from"./QuestionView-c9e32ec5.js";import{E as M}from"./examClient-b11362c9.js";import{A as F}from"./accountClient-b6fbd578.js";import{P as J}from"./publicClient-90b64d32.js";import{_ as Q}from"./plugin-vue_export-helper-c27b6911.js";import{aD as _}from"./webClient-2e88593a.js";import{f as G,r as o,o as K,G as X,X as Y,h as n,j as p,k as h,z as k,t as b,x as H,F as Z,V as $,C as ee,v as D,A as P}from"./runtime-core.esm-bundler-201072b8.js";import"./enum-012db698.js";import"./_commonjsHelpers-725317a4.js";const ae={class:"pannel"},te={key:0,class:"top-banner"},oe=["src"],le={class:"content-con"},se={key:1,class:"question-con"},ie={class:"btn-con"},ne=G({__name:"dailyPractice",setup(ce){let B=new J,q=new F,u=new M,s=O();const r=o(),f=o(),w=o(!1),c=o(!1),y=o(!1),d=o(!1),m=o(!1),v=o({}),l=o([]),T=o("11"),t=o({schoolId:"",kindId:"",zyId:"",kcId:""});K(async()=>{await q.checkLogIn()&&(await L(),c.value=await s.query.isSubmit?Boolean(s.query.isSubmit):!1,y.value=await s.query.analysis?Boolean(s.query.analysis):!1,r.value=await s.query.questionId?s.query.questionId:"",w.value=await s.query.isAgain?Boolean(s.query.isAgain):!1,c.value&&await I(),w.value&&await A(),await B.getAdvItemByKey("DailyPractice.TopBanner").then(a=>{f.value=a.data.boardUrlTbList[0].picture}))});const x=()=>{m.value=!0;let e=JSON.parse(JSON.stringify(v.value));e.practiceWrongList=E(e.practiceWrongList),u.addUserDailyPracticeAnswer(e).then(a=>{a.code==0&&(u.receiveTaskRecord(T.value).then(i=>{console.log("0000",i)}),c.value=!0,I(),C()),m.value=!1})},I=()=>{u.getDailyPracticeAnalysis(r.value).then(e=>{e.code==0?(r.value=e.data.id,v.value=e.data,l.value=e.data.practiceWrongList,g(l.value)):_({title:"提示",message:e.msg,type:"error"})})},L=()=>{u.getUserDailyPracticeRecord().then(e=>{e.data.state==1&&(t.value={schoolId:e.data.belongCollege,kindId:e.data.belongProject,zyId:e.data.belongMajor,kcId:e.data.belongCourseTitle})})},A=()=>{d.value=!0,v.value={},l.value=[],u.getDailyPracticeTopicList(r.value).then(e=>{e.code==0?e.data&&(v.value=e.data,l.value=e.data.practiceWrongList,g(l.value)):_({title:"提示",message:e.msg,type:"error"}),d.value=!1})},S=()=>{d.value=!0,r.value="",v.value={},l.value=[],u.getDailyPracticeById(t.value.schoolId?t.value.schoolId:void 0,t.value.kindId?t.value.kindId:void 0,t.value.zyId?t.value.zyId:void 0,t.value.kcId?t.value.kcId:void 0).then(e=>{e.code==0?e.data&&(r.value=e.data.id,v.value=e.data,l.value=e.data.practiceWrongList,g(l.value)):_({title:"提示",message:e.msg,type:"error"}),d.value=!1})},g=e=>{e.forEach((a,i)=>{a.questionType==1&&(a.userAnswer?a.userAnswer=a.userAnswer.split(","):a.userAnswer=[])})},E=e=>(e.forEach((a,i)=>{a.questionType==1&&(a.userAnswer?a.userAnswer=a.userAnswer.toString():a.userAnswer="")}),e),j=()=>{c.value=!1,A(),C()},C=()=>{let e=setInterval(()=>{let a=window.pageYOffset||document.documentElement.scrollTop||document.body.scrollTop,i=Math.ceil(a/5);document.documentElement.scrollTop=a-i,a===0&&clearInterval(e)},20)},N=e=>{t.value=e,c.value=!1,y.value||S()};return(e,a)=>{const i=X("el-button"),V=Y("loading");return n(),p("div",ae,[f.value?(n(),p("div",te,[h("img",{src:f.value,alt:""},null,8,oe)])):k("",!0),h("div",le,[y.value?k("",!0):(n(),b(R,{key:0,propsData:t.value,onClickProject:N},null,8,["propsData"])),l.value.length>0?H((n(),p("div",se,[(n(!0),p(Z,null,$(l.value,(z,W)=>(n(),p("div",{key:W},[ee(U,{isSubmit:c.value,item:z},null,8,["isSubmit","item"])]))),128)),h("div",ie,[c.value?(n(),b(i,{key:0,loading:d.value,class:"submit-btn",onClick:j},{default:D(()=>[P("重新答题 ")]),_:1},8,["loading"])):(n(),b(i,{key:1,loading:m.value,class:"submit-btn",onClick:x},{default:D(()=>[P("完成练习")]),_:1},8,["loading"]))])])),[[V,d.value]]):k("",!0)])])}}}),ke=Q(ne,[["__scopeId","data-v-11f5c550"]]);export{ke as default};
