import{aE as re,N as ve,aD as _e}from"./webClient-2e88593a.js";import{_ as pe}from"./yhq-f3b33ba2.js";import{_ as me}from"./noresource-15f96cd0.js";import{u as he}from"./vue-router.esm-bundler-926c5a09.js";import{E as ye}from"./evaluatView-3e999aa8.js";import{D as Q}from"./DataView-5ecd7284.js";import{Q as ke}from"./QuesBankView-8b9b466f.js";import{C as fe}from"./coachClient-6606bd3e.js";import{A as Ce}from"./accountClient-b6fbd578.js";import{P as Be}from"./publicClient-90b64d32.js";import{O as ge}from"./orderClient-3c76ba2d.js";import{_ as De}from"./plugin-vue_export-helper-c27b6911.js";import{f as Fe,r as l,o as Ee,G as h,X as Ae,h as s,j as o,k as e,x as R,B as _,C as p,A as P,F as E,V as A,z as d,n as C,v as y,t as j,af as we,ag as Ve}from"./runtime-core.esm-bundler-201072b8.js";import"./_commonjsHelpers-725317a4.js";import"./learningCenterClient-cc3ac964.js";const B=g=>(we("data-v-a2d30042"),g=g(),Ve(),g),Le={class:"pannel"},Ie={class:"top-div"},$e={key:0,class:"top-div-con","element-loading-text":"加载中..."},xe={class:"top-div-info"},Pe={class:"info-left"},be=["src"],Ne=B(()=>e("div",{class:"nav"},[e("div",{class:"nav-like"},[e("span",{class:"tip"},"温馨提示：本课程可在手机端观看")])],-1)),qe={class:"info-right"},Se={class:"title-con"},Te=B(()=>e("div",{class:"tag"},"录播",-1)),ze=["title"],Me={class:"teacher"},Ue={class:"tea-img"},He=["src"],Oe={class:"name"},Ge={class:"price label"},Qe={class:"new-price"},Re={class:"old-price"},je={class:"yhq-con"},We={key:0,class:"yhq-item"},Xe={class:"tip"},Je=["onClick"],Ke={key:1,class:"btn"},Ye={key:1,class:"yhq-item"},Ze={class:"tip"},et=["onClick"],tt={key:1,class:"btn"},st=["href"],ot=B(()=>e("img",{src:pe},null,-1)),it={class:"buy-btn"},at={key:1,class:"btn1"},lt={class:"content-div"},ut={class:"content-left"},nt={class:"left-nav"},ct={key:0,class:"tag"},dt=["innerHTML"],rt={class:"con-zhang"},vt={key:0},_t={class:"zhang"},pt={class:"title"},mt={key:0,class:"tag"},ht={key:0,class:"iconfont iconbofang"},yt=["title"],kt=["onClick"],ft={class:"btn"},Ct=["onClick"],Bt=["onClick"],gt=["onClick"],Dt={key:1,class:"con-data"},Ft={key:2,class:"con-test"},Et={key:3,class:"con-evaluate mt17"},At={class:"content-right"},wt=B(()=>e("div",{class:"right-title"},"推荐课程",-1)),Vt=["onClick"],Lt=["src"],It={class:"con"},$t={class:"title twoEllipsis"},xt={class:"tea"},Pt={class:"tea-img"},bt=["src"],Nt={class:"label oneEllipsis"},qt=B(()=>e("div",{class:"noBuy"},[e("img",{src:me}),e("div",{class:"danger"},"您尚未购买此课程")],-1)),St={class:"freeDialog"},Tt=["src"],zt=Fe({__name:"videoCourse",setup(g){let k=new fe,D=new Ce,W=new Be,b=new ge;const w=l(!1),X=he(),u=l(1),N=l(!1),r=l(),n=l({}),q=l(null),v=l(!1),F=l(!1),V=l(!1),L=l(!1),S=l(""),T=l([]),z=l([]),M=l([]),U=l([]),I=l([]);Ee(()=>{r.value=X.query.id,q.value=re(),J(),Y(),K(),Z(),ee(),H(),q.value&&W.checkIsOrder(2,r.value).then(a=>{v.value=a})});const J=()=>{w.value=!0,k.queryCourseDetails(r.value).then(a=>{for(let i of a.data.videoList)for(let m of i.queryVideoNodeList)m.limitPlayLink&&(N.value=!0,i.haveTrialVideo=!0);n.value=a.data,n.value.evaluateScore=5,document.title=a.data.courseName,w.value=!1})},K=()=>{k.addFrequency(r.value)},Y=()=>{k.queryCourseRecommend(1,5).then(a=>{T.value=a.data})},H=()=>{b.getMarketCouponsProList(2,r.value).then(a=>{I.value=a.data.length>0?a.data:[]})},O=async a=>{if(await D.checkLogIn()){let m=await b.getCoupon(a);m.code==0&&H(),_e({title:"提示",message:m.msg,type:"success",duration:2e3})}},Z=()=>{k.getCourseDocs(r.value).then(a=>{M.value=a.data})},ee=()=>{k.getCoursePapers(r.value).then(a=>{U.value=a.data})},te=a=>{S.value=a,L.value=!0},G=async a=>{await D.checkLogIn()&&(v.value?(V.value=!0,z.value=a):F.value=!0)},se=async(a,i)=>{await D.checkLogIn()&&(v.value?window.location.href=`/questionBank/examDetails?id=${i}&examType=${16}&courseId=${r.value}&chapterId=${a}`:F.value=!0)},oe=async()=>{await D.checkLogIn()&&(window.location.href=`/order/chooseGoods?itemType=2&itemId=${r.value}`)},ie=(a,i)=>{a==1?window.open(`/coachcourse/liveCourse?id=${i}`):window.open(`/coachcourse/videoCourse?id=${i}`)};return(a,i)=>{const m=h("el-rate"),ae=h("el-svg-icon"),le=h("el-collapse-item"),ue=h("el-collapse"),ne=h("el-empty"),$=h("el-dialog"),ce=Ae("loading");return s(),o("div",Le,[e("div",Ie,[n.value?R((s(),o("div",$e,[e("div",xe,[e("div",Pe,[e("img",{class:"img",src:n.value.surfacePlot},null,8,be),Ne]),e("div",qe,[e("div",Se,[Te,e("div",{class:"title oneEllipsis",title:n.value.courseName},_(n.value.courseName),9,ze)]),e("div",Me,[e("div",Ue,[e("img",{src:n.value.teacherPortrait,alt:""},null,8,He)]),e("div",Oe,"讲师："+_(n.value.teacherName),1),p(m,{modelValue:n.value.evaluateScore,"onUpdate:modelValue":i[0]||(i[0]=t=>n.value.evaluateScore=t),disabled:""},null,8,["modelValue"])]),e("div",Ge,[P(" 价格： "),e("span",Qe," ￥"+_(n.value.currentPrice),1),e("span",Re,"￥"+_(n.value.originalPrice),1)]),e("div",je,[(s(!0),o(E,null,A(I.value.slice(0,3),(t,f)=>(s(),o("div",{class:"yhq",key:f},[t.couponType==1?(s(),o("div",We,[e("div",Xe,"无门槛券"+_(t.discountAmount)+"元",1),t.receiveStatus==0?(s(),o("div",{key:0,class:"btn pointer",onClick:c=>O(t.couponId)},"立即领取>>",8,Je)):(s(),o("div",Ke,"已领取"))])):d("",!0),t.couponType==2?(s(),o("div",Ye,[e("div",Ze,"每满"+_(t.limitPrice)+"减"+_(t.discountAmount),1),t.receiveStatus==0?(s(),o("div",{key:0,class:"btn pointer",onClick:c=>O(t.couponId)},"立即领取>>",8,et)):(s(),o("div",tt,"已领取"))])):d("",!0)]))),128)),I.value.length>3?(s(),o("a",{key:0,href:`/couponCenter?type=2&id=${r.value}`,target:"_blank",class:"yhq-more pointer"},[ot,P(" 领取更多优惠券 ")],8,st)):d("",!0)]),e("div",it,[v.value?(s(),o("div",at,"已购买")):(s(),o("div",{key:0,class:"btn1 pointer",onClick:oe}," 立即购买 "))])])])])),[[ce,w.value]]):d("",!0)]),e("div",lt,[e("div",ut,[e("div",nt,[e("div",{class:C(["left-nav-item pointer",{xuan:u.value==1}]),onClick:i[1]||(i[1]=t=>u.value=1)}," 课程详情 ",2),e("div",{class:C(["left-nav-item pointer",{xuan:u.value==2}]),onClick:i[2]||(i[2]=t=>u.value=2)},[P(" 课程列表 "),N.value?(s(),o("div",ct,"试看")):d("",!0)],2),e("div",{class:C(["left-nav-item pointer",{xuan:u.value==3}]),onClick:i[3]||(i[3]=t=>u.value=3)}," 课程资料 ",2),e("div",{class:C(["left-nav-item pointer",{xuan:u.value==4}]),onClick:i[4]||(i[4]=t=>u.value=4)}," 课程测试 ",2),e("div",{class:C(["left-nav-item pointer",{xuan:u.value==5}]),onClick:i[5]||(i[5]=t=>u.value=5)}," 课程评价 ",2)]),u.value==1?(s(),o("div",{key:0,class:"con-html",innerHTML:n.value.summarizeContent},null,8,dt)):d("",!0),R(e("div",rt,[n.value.videoList?(s(),o("div",vt,[(s(!0),o(E,null,A(n.value.videoList,(t,f)=>(s(),o("div",{class:"zhang-item",key:f},[p(ue,null,{default:y(()=>[p(le,null,{title:y(()=>[e("div",_t,[e("span",pt,_(t.videoChapterName),1),t.haveTrialVideo?(s(),o("div",mt," 免费试看 ")):d("",!0)])]),default:y(()=>[(s(!0),o(E,null,A(t.queryVideoNodeList,(c,de)=>(s(),o("div",{class:"item",key:de},[v.value?(s(),o("i",ht)):(s(),j(ae,{key:1,name:"Lock",style:{"margin-right":"5px","margin-left":"20px"},size:18})),e("div",{class:"title oneEllipsis",title:c.nodeName},_(c.nodeName),9,yt),c.limitPlayLink?(s(),o("div",{key:2,class:"name-btn pointer",onClick:x=>te(c.limitPlayLink)}," 免费试看 ",8,kt)):d("",!0),e("div",ft,[c.whetherAttachment==1?(s(),o("div",{key:0,onClick:x=>G(c.attachmentList)}," 随堂课件 ",8,Ct)):d("",!0),c.whetherMeans==1?(s(),o("div",{key:1,onClick:x=>G(c.meansList)}," 随堂资料 ",8,Bt)):d("",!0),c.whetherPaper==1?(s(),o("div",{key:2,onClick:x=>se(c.nodeId,c.paperId)}," 随堂测试 ",8,gt)):d("",!0)])]))),128))]),_:2},1024)]),_:2},1024)]))),128))])):(s(),j(ne,{key:1,description:"暂无数据~"}))],512),[[ve,u.value==2]]),u.value==3?(s(),o("div",Dt,[p(Q,{isBuy:v.value,courseIsBuy:v.value,items:M.value},null,8,["isBuy","courseIsBuy","items"])])):d("",!0),u.value==4?(s(),o("div",Ft,[p(ke,{isBuy:v.value,courseIsBuy:v.value,examType:15,courseId:r.value,papers:U.value},null,8,["isBuy","courseIsBuy","courseId","papers"])])):d("",!0),u.value==5?(s(),o("div",Et,[p(ye,{isBuy:v.value,type:7,typeId:r.value},null,8,["isBuy","typeId"])])):d("",!0)]),e("div",At,[wt,(s(!0),o(E,null,A(T.value,(t,f)=>(s(),o("div",{class:"item pointer",key:f,onClick:c=>ie(t.courseType,t.courseId)},[e("img",{class:"item-img",src:t.surfacePlot},null,8,Lt),e("div",It,[e("div",$t,_(t.courseName),1),e("div",xt,[e("div",Pt,[e("img",{src:t.teacherPortrait,alt:""},null,8,bt)]),e("span",Nt,"讲师："+_(t.teacherName),1)])])],8,Vt))),128))])]),p($,{width:"720px",modelValue:V.value,"onUpdate:modelValue":i[6]||(i[6]=t=>V.value=t)},{default:y(()=>[p(Q,{isBuy:v.value,courseIsBuy:v.value,items:z.value},null,8,["isBuy","courseIsBuy","items"])]),_:1},8,["modelValue"]),p($,{width:"30%",modelValue:F.value,"onUpdate:modelValue":i[7]||(i[7]=t=>F.value=t)},{default:y(()=>[qt]),_:1},8,["modelValue"]),p($,{width:"45%",modelValue:L.value,"onUpdate:modelValue":i[8]||(i[8]=t=>L.value=t),"destroy-on-close":!0},{default:y(()=>[e("div",St,[e("video",{src:S.value,controls:""},null,8,Tt)])]),_:1},8,["modelValue"])])}}}),ts=De(zt,[["__scopeId","data-v-a2d30042"]]);export{ts as default};
